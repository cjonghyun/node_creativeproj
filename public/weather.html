<html>
    <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">    
    <title>Weather and Stack Exchange</title>
    <script
      src="http://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous">
    </script>
    <script>
        $(document).ready(function() {
        $( "#cityField" ).keyup(function() {
            var url = "http://ec2-52-14-104-113.us-east-2.compute.amazonaws.com:3004/getcity?q="+$("#cityField").val();
            $.getJSON(url,function(data) {
            var everything;
            everything = "<ul>";
            $.each(data, function(i,item) {
            everything += "<li> "+data[i].city;
            });
            everything += "</ul>";
            $("#txtHint").html(everything);
        })
        .done(function() { console.log('getJSON request succeeded!'); })
        .fail(function(jqXHR, textStatus, errorThrown) { 
            console.log('getJSON request failed! ' + textStatus); 
            console.log("incoming "+jqXHR.responseText);
        })
        .always(function() { console.log('getJSON request ended!');
        });
        });
        });
    </script>    
    </head>
    <body>
    <form>
        <h2>            
                <img src="img/weather.svg" alt="weather" >
            Weather
        </h2>
    Enter A Utah City: <input type="text" id="cityField" value=""><br>
    Suggestion: <span id="txtHint">Empty</span>
    <input id="weatherButton" type="submit" value="Submit">    
    <p>City</p>
    <textarea id="displayCity">No City</textarea>
    <p>Current Weather</p>
    <div id="weather">No weather</div>
    <br>
    <img src="http://icons.iconarchive.com/icons/grafikartes/flat-retro-modern-2/72/dictionary-icon.png">   
    Enter A Word: <input type="text" id="wordField" value=""><br>
    Definition: <span id="definition">Empty</span>
   <script>
        $(document).ready(function() {
        $( "#wordField" ).keyup(function() {
	    var word = $("#wordField").val();
	    if(word.length < 1 || word == "")
		return;
            var url = "http://ec2-52-14-104-113.us-east-2.compute.amazonaws.com:3004/getword?q="+word;
            $.getJSON(url,function(data) {
console.log(data);
		if(data[0]){
            		$("#definition").html(data[0]["defenition"]);
		}
		else{
			$("#definition").html("");
		}
        })
        .done(function() { console.log('getJSON request succeeded!'); })
        .fail(function(jqXHR, textStatus, errorThrown) { 
            console.log('getJSON request failed! ' + textStatus); 
            console.log("incoming "+jqXHR.responseText);
        })
        .always(function() { console.log('getJSON request ended!');
        });
        });

  $("#weatherButton").click(function(e){
            var value = $("#cityField").val();
            console.log(value);
            $("#displayCity").val(value);
            e.preventDefault();
            var myurl= "https://api.wunderground.com/api/ff4ff19052113966/geolookup/conditions/q/UT/";
            myurl += value;
            myurl += ".json";
            console.log(myurl);
            $.ajax({
              url : myurl,
              dataType : "json",
              success : function(parsed_json) {
                var location = parsed_json['location']['city'];
                var temp_string = parsed_json['current_observation']['temperature_string'];
                var current_weather = parsed_json['current_observation']['weather'];
                everything = "<ul>";
                everything += "<li>Location: "+location;
                everything += "<li>Temperature: "+temp_string;
                everything += "<li>Weather: "+current_weather;
                everything += "</ul>";                
                $("#weather").html(everything);
              }
            });
          
        });

        });
    </script>
    </body>
    </html>
    
